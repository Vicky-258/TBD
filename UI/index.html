<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ship Dashboard</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Window Control Buttons -->
  <div class="window-controls">
    <button class="window-btn minimize-btn" onclick="minimizeWindow()" title="Minimize">‚îÄ</button>
    <button class="window-btn restore-btn" onclick="toggleMaximize()" title="Restore/Maximize">‚ñ°</button>
    <button class="window-btn close-btn" onclick="exitApp()" title="Close">‚úï</button>
  </div>
  <!-- Loading Screen -->
  <div id="loading-screen" class="loading-screen">
    <h1 class="loading-text">Initializing Ship Systems...</h1>
    <p class="loading-subtext">Navigating the digital seas...</p>
  </div>

  <!-- Video Screen -->
  <div id="video-screen" class="video-screen hidden">
    <video id="intro-video" autoplay muted>
      <source src="assets/intro.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <div class="video-watermark-cover"></div>
  </div>

  <!-- Mode Selection Screen -->
  <div id="mode-selection" class="mode-selection hidden">
    <h1 class="mode-title">Select Operating Mode</h1>
    <div class="quote-slideshow">
      <div class="quote active">"Not all treasure is silver and gold, mate." ‚Äî Jack Sparrow</div>
      <div class="quote">"The problem is not the problem. The problem is your attitude about the problem." ‚Äî Jack Sparrow</div>
      <div class="quote">"Why is the rum always gone?" ‚Äî Jack Sparrow</div>
      <div class="quote">"A smooth sea never made a skilled sailor." ‚Äî Franklin D. Roosevelt</div>
      <div class="quote">"The sea, once it casts its spell, holds one in its net of wonder forever." ‚Äî Jacques Cousteau</div>
    </div>
    <div class="mode-buttons">
      <button onclick="selectMode('departure')" class="retro-button">Departure Prep</button>
      <button onclick="selectMode('sailing')" class="retro-button">Sailing Mode</button>
      <button onclick="selectMode('voyage-history')" class="retro-button">Voyage History</button>
            <button onclick="exitApp()" class="retro-button exit-button">Exit App</button>
    </div>
  </div>

  <!-- Departure Prep Screen -->
  <div id="departure-prep" class="departure-prep hidden">
    <button class="back-to-home retro-button" onclick="backToHome()">Back to Home</button>
    <div class="prep-grid">
      <div class="prep-option">
        <h3>Upload Documents</h3>
        <p>Upload necessary voyage documents</p>
        <input type="file" id="document-upload" accept=".pdf" class="upload-button" onchange="uploadDocuments()">
        <label for="document-upload" class="retro-button upload-label">Upload PDF</label>
        <pre id="upload-status" style="margin-top:10px; color:#00ffcc; font-family:monospace;"></pre>

      </div>
      <div class="prep-option">
        <h3>Logistics Upload</h3>
        <p>Upload logistics and cargo details</p>
        <input type="file" id="logistics-upload" accept=".pdf" class="upload-button" onchange="uploadLogistics()">
        <label for="logistics-upload" class="retro-button upload-label">Upload PDF</label>
      </div>
      <div class="prep-option">
        <h3>Crew Log Upload</h3>
        <p>Upload crew details and logs</p>
        <input type="file" id="crew-log-upload" accept=".pdf" class="upload-button" onchange="uploadCrewLog()">
        <label for="crew-log-upload" class="retro-button upload-label">Upload PDF</label>
      </div>
<div class="prep-option">
  <h3>Get Weather</h3>
  <p>Retrieve latest weather updates</p>
  <button onclick="getWeather()" class="retro-button weather-button">Get Weather</button>

  <!-- üì¶ Output Box -->
  <pre id="weather-output"
    style="margin-top:10px; background:#1a1a1a; color:#00ffcc; padding:1em; border-radius:8px; font-family:monospace; white-space:pre-wrap; max-height:300px; overflow:auto;"></pre>
</div>

    </div>
  </div>

  <!-- Voyage History Screen -->
  <div id="voyage-history" class="voyage-history hidden">
    <button class="back-to-home retro-button" onclick="backToHome()">Back to Home</button>
    <h2>Voyage History</h2>
    <div class="voyage-tabs">
      <button class="tab retro-button active" onclick="showVoyageTab('completed')">Completed</button>
      <button class="tab retro-button" onclick="showVoyageTab('ongoing')">Ongoing</button>
    </div>
    <div id="completed-voyages" class="voyage-list">
      <h3>Completed Voyages</h3>
      <div class="voyage-item">Voyage #001 - Completed on 2025-07-20</div>
      <div class="voyage-item">Voyage #002 - Completed on 2025-06-15</div>
    </div>
    <div id="ongoing-voyages" class="voyage-list hidden">
      <h3>Ongoing Voyages</h3>
      <div class="voyage-item">Voyage #003 - In Progress</div>
    </div>
  </div>

  <!-- Homepage (Sailing Mode) -->
  <div id="homepage" class="homepage hidden">
    <button class="back-to-home retro-button" onclick="backToHome()">Back to Home</button>
    <button class="new-chat retro-button" onclick="newChat()">New Chat</button>
    <header>
      <span class="settings-icon" onclick="toggleSettings()">‚öôÔ∏è</span>
      <div class="settings-dashboard" id="settings-dashboard">
        <h2 >Chat History</h2>
        <ul>
         
          <li class="retro-menu-item"></li>
        </ul>
      </div>
      <h2>Ship Assistant</h2>
      <span class="user-greeting">Welcome, Captain</span>
    </header>

    <div class="main-content">
      <div class="left-panel">
        <div class="routing-summary">  
          <h3>Ship Routing Summary</h3>
        <div class="map-placeholder">Placeholder: Routing Map (Backend TBD)</div>
        <p>Summary: Awaiting backend data for route details.</p>
      </div>
        <div class="carousel-container">
          <button class="carousel-nav prev-btn" onclick="prevSlide()">‚óÑ</button>
          <div class="feature-carousel">
            <div class="feature-box" id="weather-forecast">
              <img src="assets/weatherforecasting.jpg" alt="Weather Forecast">
              <h4>Weather Forecast</h4>
            </div>
            
            <div class="feature-box" id="ship-routing">
              <img src="assets/shiprouting.jpg" alt="Ship Routing">
              <h4>Ship Routing</h4>
            </div>
            <div class="feature-box" id="checklist">
              <img src="assets/checklist.jpg" alt="Checklist">
              <h4>Crew Details</h4>
            </div>
            <div class="feature-box" id="party-mode">
              <img src="assets/party.jpg" alt="Party Mode">
              <h4>Party Mode</h4>
            </div>
          </div>
          <button class="carousel-nav next-btn" onclick="nextSlide()">‚ñ∫</button>
        </div>
      </div>
      <div class="card chatbot-box">
        <div id="chat-history" class="chat-history"></div>
<!-- ‚¨ÜÔ∏è Image Preview First -->
<div id="image-preview-container" class="image-preview-container" style="display: none;">
  <img id="image-preview" src="" alt="Preview" />
  <button onclick="clearImage()" class="retro-button clear-image-button">‚ùå Clear</button>
</div>

<!-- üìù Then Chat Input -->
<div class="chat-input">
  <textarea id="chat-input" rows="2" placeholder="Type your command..."></textarea>

  <button id="mic-button" onclick="toggleRecording()" class="retro-button mic-button" title="Record Audio">üé§</button>

  <label for="image-upload" class="retro-button upload-button" title="Attach Image">üì∑</label>
  <input type="file" id="image-upload" accept="image/*" style="display: none;" onchange="handleImageUpload(event)" />

  <button onclick="sendMessage()" class="retro-button">SEND</button>
</div>


</div>

      </div>
    </div>
  </div>

  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</body>
</html>